service: api # Name of the App
functions: ${file(functions/azure.yml)}
# resources:
#   - ${file(resources/aws/api-gateway-errors.yml)}
#   - ${file(resources/aws/dynamodb-table.yml)}
#   - ${file(resources/aws/s3-bucket.yml)}

frameworkVersion: ">=1.21.0 <2.0.0" # Serverless Framework version constraints

provider:
  name: azure
  runtime: nodejs12
  prefix: int
  stage: qa
  region: West US
  versionFunctions: false
  os: linux
  apim: true

plugins:
  - serverless-azure-functions
  - serverless-dotenv-plugin
  - serverless-webpack

package:
  individually: true
  excludeDevDependencies: true
  exclude:
    - local.settings.json
    - .vscode/**

custom:
  webpack:
    packager: npm
    excludeFiles: ./**/*.test.js # Provide a glob for files to ignore
    webpackConfig: build/webpack.config.js
    includeModules:
      forceExclude:
        - "aws-sdk"
